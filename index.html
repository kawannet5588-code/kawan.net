<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAWAN NET | Internet Cepat Desa</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary: #2563eb; /* Biru Modern */
            --secondary: #06b6d4; /* Cyan/Teal */
            --dark: #0f172a;
            --light: #f8fafc;
            --gray: #64748b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        html { 
            scroll-behavior: smooth; 
            scroll-padding-top: 190px;
        body { 
            background-color: var(--light); 
            color: var(--dark); 
        }

        /* Navbar Efek Kaca (Glassmorphism) */
        nav { 
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.3);
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
        }
        .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .logo img { height: 100px; }
        .logo span { font-weight: 800; font-size: 22px; color: var(--dark); letter-spacing: -0.5px; }
        
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { text-decoration: none; color: var(--gray); font-weight: 600; transition: 0.3s; font-size: 15px; }
        .nav-links a:hover { color: var(--primary); }

        /* Hero Section Modern */
        header { 
            padding: 160px 5% 100px; 
            text-align: center; 
            background: radial-gradient(circle at top, #e0f2fe 0%, var(--light) 70%);
        }
        .badge { display: inline-block; padding: 8px 16px; background: #dbeafe; color: var(--primary); border-radius: 50px; font-weight: 700; font-size: 14px; margin-bottom: 20px; }
        header h1 { font-size: 52px; font-weight: 800; line-height: 1.1; margin-bottom: 20px; letter-spacing: -1.5px; }
        .text-gradient { 
            background: linear-gradient(to right, var(--primary), var(--secondary)); 
            -webkit-background-clip: text; color: transparent; 
        }
        header p { font-size: 18px; color: var(--gray); max-width: 600px; margin: 0 auto 40px; line-height: 1.6; }
        
        .btn-primary { 
            background: linear-gradient(to right, var(--primary), var(--secondary)); 
            color: white; padding: 16px 36px; border-radius: 50px; text-decoration: none; font-weight: 700; 
            font-size: 16px; box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.4); transition: 0.3s; display: inline-block;
        }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 15px 35px -5px rgba(37, 99, 235, 0.5); }

        /* Section Global */
        section { padding: 80px 5%; }
        .section-header { text-align: center; margin-bottom: 60px; }
        .section-header h2 { font-size: 36px; font-weight: 800; margin-bottom: 15px; letter-spacing: -1px; }
        .section-header p { color: var(--gray); font-size: 16px; }

        /* Card Paket Melayang */
        .grid-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1100px; margin: 0 auto; }
        .card { 
            background: white; border-radius: 24px; padding: 40px; position: relative;
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.05); transition: all 0.4s ease; border: 1px solid #f1f5f9;
        }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1); border-color: #e2e8f0; }
        .card.popular { border: 2px solid var(--primary); transform: scale(1.05); }
        .card.popular:hover { transform: scale(1.05) translateY(-10px); }
        .popular-badge { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: var(--primary); color: white; padding: 6px 20px; border-radius: 20px; font-size: 12px; font-weight: 700; box-shadow: 0 4px 10px rgba(37,99,235,0.3); }
        
        .card h3 { font-size: 22px; color: var(--dark); margin-bottom: 10px; }
        .price { font-size: 42px; font-weight: 800; color: var(--dark); margin-bottom: 20px; }
        .price span { font-size: 16px; color: var(--gray); font-weight: 500; }
        .card ul { list-style: none; margin-bottom: 30px; }
        .card ul li { padding: 10px 0; color: var(--gray); border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; gap: 10px; }
        .card ul li::before { content: '‚úì'; color: var(--secondary); font-weight: bold; }
        
        .btn-outline { display: block; text-align: center; padding: 14px; border-radius: 12px; font-weight: 700; text-decoration: none; border: 2px solid #e2e8f0; color: var(--dark); transition: 0.3s; }
        .btn-outline:hover { border-color: var(--primary); color: var(--primary); }
        .card.popular .btn-outline { background: var(--primary); color: white; border-color: var(--primary); }
        .card.popular .btn-outline:hover { background: #1d4ed8; }

        /* Fitur Cek Tagihan Elegan */
        .cek-box { 
            max-width: 600px; margin: 0 auto; background: white; padding: 40px; border-radius: 24px; 
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.08); text-align: center;
        }
        .input-group { display: flex; gap: 10px; margin-top: 20px; }
        .input-group input { 
            flex: 1; padding: 16px 20px; border-radius: 12px; border: 2px solid #e2e8f0; 
            font-size: 16px; outline: none; transition: 0.3s; font-family: 'Plus Jakarta Sans', sans-serif;
        }
        .input-group input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37,99,235,0.1); }
        .input-group button { 
            background: var(--dark); color: white; border: none; padding: 0 30px; border-radius: 12px; 
            font-weight: 700; cursor: pointer; transition: 0.3s; 
        }
        .input-group button:hover { background: var(--primary); }

        /* Footer */
        footer { background: white; padding: 60px 5% 30px; border-top: 1px solid #e2e8f0; text-align: center; }
        .footer-logo img { height: 40px; filter: grayscale(100%); opacity: 0.6; margin-bottom: 20px; transition: 0.3s; }
        .footer-logo img:hover { filter: none; opacity: 1; }
        .copyright { color: var(--gray); font-size: 14px; margin-bottom: 10px; }
        .staff-link { color: #cbd5e1; font-size: 12px; text-decoration: none; transition: 0.3s; }
        .staff-link:hover { color: var(--primary); }

        @media (max-width: 768px) {
            header h1 { font-size: 38px; }
            .nav-links { display: none; }
            .card.popular { transform: none; }
            .card.popular:hover { transform: translateY(-10px); }
            .input-group { flex-direction: column; }
            .input-group button { padding: 16px; }
        }
            /* CSS Tambahan untuk Peta Modern */
        
        /* 1. Efek Titik Berdenyut (Pulse Animation) */
        @keyframes pulse-modern {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(2); opacity: 0; }
            100% { transform: scale(1); opacity: 0; }
        }

        /* 2. Gaya Popup Modern (Glassmorphism) */
        .leaflet-popup-content-wrapper {
            background: rgba(255, 255, 255, 0.7) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            color: #0f172a;
            font-family: 'Plus Jakarta Sans', sans-serif !important;
        }
        .leaflet-popup-tip { background: rgba(255, 255, 255, 0.7) !important; backdrop-filter: blur(10px); }
        .leaflet-popup-close-button { color: #64748b !important; padding: 10px !important; }

        /* 3. Gaya Judul Peta Gradasi */
        .modern-title {
            background: linear-gradient(to right, #2563eb, #06b6d4);
            -webkit-background-clip: text; color: transparent;
            font-weight: 800; font-size: 20px;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

    <nav>
        <a href="#" class="logo">
            <img src="https://lh3.googleusercontent.com/d/1v7aYOpLRpcM9iQM_mbmR2BQJXOm6iyij" alt="Logo Kawan Net">
            <span>KAWAN NET</span>
        </a>
        <div class="nav-links">
            <a href="#paket">Paket Internet</a>
            <a href="#cek-tagihan">Layanan Pelanggan</a>
            <a href="https://wa.me/6285602533346" target="_blank" style="color: var(--primary);">Hubungi Kami</a>
        </div>
    </nav>

    <header>
        <div class="badge">üöÄ Bekerja sama dengan BUMDes</div>
        <h1>Koneksi Tanpa Batas<br>Untuk <span class="text-gradient">Keluarga Anda</span></h1>
        <p>Nikmati layanan internet Fiber Optic super cepat, stabil, dan terjangkau. Bebas FUP, streaming lancar, dan main game tanpa nge-lag di seluruh area jangkauan kami.</p>
        <a href="#paket" class="btn-primary">Lihat Pilihan Paket</a>
    </header>

    <section id="paket">
        <div class="section-header">
            <h2>Pilih Paket Sesuai Kebutuhan</h2>
            <p>Harga jujur, transparan, tanpa biaya tersembunyi.</p>
        </div>
        
        <div class="grid-cards">
            <div class="card">
                <h3>Paket Hemat</h3>
                <div class="price">5 <span>Mbps</span></div>
                <ul>
                    <li>Ideal untuk 1-3 Perangkat</li>
                    <li>Browsing & Sosmed Lancar</li>
                    <li>Unlimited Tanpa FUP</li>
                    <li>Full Fiber Optic</li>
                </ul>
                <a href="https://wa.me/6285602533346?text=Halo%20Admin%20Kawan%20Net,%20saya%20mau%20pasang%20Paket%20Hemat%205Mbps" class="btn-outline">Pilih Paket Ini</a>
            </div>

            <div class="card popular">
                <div class="popular-badge">Paling Laris üî•</div>
                <h3>Paket Keluarga</h3>
                <div class="price">10 <span>Mbps</span></div>
                <ul>
                    <li>Ideal untuk 4-7 Perangkat</li>
                    <li>Streaming YouTube/Netflix HD</li>
                    <li>Sekolah Online & Zoom Lancar</li>
                    <li>Unlimited Tanpa FUP</li>
                </ul>
                <a href="https://wa.me/6285602533346?text=Halo%20Admin%20Kawan%20Net,%20saya%20mau%20pasang%20Paket%20Keluarga%2010Mbps" class="btn-outline">Pilih Paket Ini</a>
            </div>

            <div class="card">
                <h3>Paket Pro</h3>
                <div class="price">20 <span>Mbps</span></div>
                <ul>
                    <li>Ideal untuk >8 Perangkat</li>
                    <li>Game Online Prioritas (Ping Stabil)</li>
                    <li>Download/Upload Super Cepat</li>
                    <li>Unlimited Tanpa FUP</li>
                </ul>
                <a href="https://wa.me/6285602533346?text=Halo%20Admin%20Kawan%20Net,%20saya%20mau%20pasang%20Paket%20Pro%2020Mbps" class="btn-outline">Pilih Paket Ini</a>
            </div>
        </div>
    </section>

    <section id="cek-tagihan" style="background: var(--light);">
        <div class="section-header">
            <h2>Portal Pelanggan</h2>
            <p>Cek status jaringan dan informasi layanan Anda secara mandiri.</p>
        </div>
        
        <div class="cek-box">
            <h3 style="margin-bottom: 10px; font-size: 20px;">Cek Status & Info Tagihan</h3>
            <p style="color: var(--gray); font-size: 14px;">Masukkan ID Pelanggan Anda (Contoh: KN2512-xxx)</p>
            
            <div class="input-group">
                <input type="text" id="idPelanggan" placeholder="Ketik ID Pelanggan di sini...">
                <button onclick="cekStatus()">Cek Sekarang</button>
            </div>
            
            <div id="hasilCek" style="margin-top: 30px; text-align: left;"></div>
        </div>
    </section>
<section id="peta-jaringan" style="background: white;">
        <div class="section-header">
            <h2>Jangkauan Kawan Net</h2>
            <p>Peta sebaran pelanggan aktif kami di wilayah Pekalongan dan sekitarnya.</p>
        </div>
        
        <div style="max-width: 1000px; margin: 0 auto; padding: 10px; background: white; border-radius: 24px; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.08); border: 1px solid #f1f5f9;">
            <div id="map" style="height: 500px; border-radius: 16px; z-index: 1;"></div>
        </div>
    </section>
    <footer>
        <div class="footer-logo">
            <img src="https://lh3.googleusercontent.com/d/1v7aYOpLRpcM9iQM_mbmR2BQJXOm6iyij" alt="Kawan Net">
        </div>
        <p class="copyright">¬© 2026 KAWAN NET Pekalongan. All Rights Reserved. <br>Bekerja sama dengan BUMDes.</p>
        <a href="#" class="staff-link">üîí Portal Staf Internal</a>
    </footer>

   <script>
       const urlAPI = "https://script.google.com/macros/s/AKfycbzuX60x0FznRreXKORnFGAFU_8dIC8Q9kNWS53X8ENyTthBTid7XlPy-hjqmKtY-Q0Vkw/exec"; 
       document.querySelectorAll('.nav-links a[href^="#"], .btn-primary[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault(); // Mencegah browser melompat kasar
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    // Jarak pengereman disetel 190px agar pas dengan logo besar Kawan Net
                    const targetPosition = targetElement.getBoundingClientRect().top + window.scrollY - 190;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth' // Memaksa guliran menjadi super halus
                    });
                }
            });
        });
        // Fungsi untuk format angka jadi Rupiah (Rp 50.000)
        function formatRupiah(angka) {
            let numberString = angka.toString().replace(/[^,\d]/g, '');
            if(!numberString) return angka; 
            return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(numberString);
        }

        function cekStatus() {
            const id = document.getElementById('idPelanggan').value.trim();
            const hasilDiv = document.getElementById('hasilCek');

            if(!id) {
                Swal.fire({ icon: 'warning', title: 'Oops...', text: 'Mohon ketik ID Pelanggan Anda terlebih dahulu!', confirmButtonColor: '#2563eb', borderRadius: '20px' });
                return;
            }

            hasilDiv.innerHTML = `
                <div style="padding:40px; background:white; border-radius:24px; text-align:center; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.05); border: 1px solid #f1f5f9;">
                    <div style="display:inline-block; width:40px; height:40px; border:4px solid #e2e8f0; border-top-color:#2563eb; border-radius:50%; animation:spin 1s linear infinite;"></div>
                    <p style="margin-top:15px; color:#64748b; font-weight:600;">Mengambil data dari server...</p>
                    <style>@keyframes spin { 100% { transform: rotate(360deg); } }</style>
                </div>`;

            fetch(urlAPI + "?id=" + id)
            .then(response => response.json())
            .then(data => {
                if(data.sukses) {
                    const isAktif = data.status === 'Aktif';
                    const colorMain = isAktif ? '#10b981' : '#ef4444';
                    const colorBg = isAktif ? '#ecfdf5' : '#fef2f2';
                    const colorText = isAktif ? '#065f46' : '#991b1b';
                    
                    // Terapkan format Rupiah ke harga paket
                    const hargaPaket = formatRupiah(data.paket);

                    hasilDiv.innerHTML = `
                        <div style="background: white; padding: 35px; border-radius: 24px; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1); border: 1px solid #f1f5f9; text-align: left; position: relative; overflow: hidden; transform: translateY(-5px); transition: 0.3s;">
                            <div style="position: absolute; top: 0; left: 0; width: 6px; height: 100%; background: ${colorMain};"></div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px dashed #f1f5f9; padding-bottom: 20px; margin-bottom: 25px;">
                                <div>
                                    <p style="font-size: 12px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px;">ID Pelanggan</p>
                                    <h4 style="font-size: 22px; color: #0f172a; font-weight: 800;">${data.id || id}</h4>
                                </div>
                                <div style="background: ${colorBg}; color: ${colorText}; padding: 8px 18px; border-radius: 50px; font-weight: 700; font-size: 14px; display: flex; align-items: center; gap: 8px;">
                                    <span style="display:inline-block; width:8px; height:8px; border-radius:50%; background:${colorMain}; box-shadow: 0 0 8px ${colorMain};"></span>
                                    ${data.status}
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div>
                                    <p style="font-size: 12px; color: #64748b; margin-bottom: 4px;">Nama Pelanggan</p>
                                    <p style="font-size: 16px; color: #0f172a; font-weight: 700;">${data.nama}</p>
                                </div>
                                <div>
                                    <p style="font-size: 12px; color: #64748b; margin-bottom: 4px;">Biaya Paket</p>
                                    <p style="font-size: 16px; color: #2563eb; font-weight: 800;">${hargaPaket} <span style="font-size:12px; color:#64748b; font-weight:500;">/bln</span></p>
                                </div>
                                <div style="grid-column: span 2; background: #f8fafc; padding: 12px; border-radius: 12px;">
                                    <p style="font-size: 12px; color: #64748b; margin-bottom: 4px;">Alamat Pemasangan</p>
                                    <p style="font-size: 14px; color: #334155; font-weight: 600;">${data.alamat}</p>
                                </div>
                                <div>
                                    <p style="font-size: 12px; color: #64748b; margin-bottom: 4px;">Titik ODP</p>
                                    <p style="font-size: 14px; color: #334155; font-weight: 600;">üìç ${data.odp}</p>
                                </div>
                                <div>
                                    <p style="font-size: 12px; color: #64748b; margin-bottom: 4px;">Terdaftar Sejak</p>
                                    <p style="font-size: 14px; color: #334155; font-weight: 600;">üìÖ ${data.tanggal}</p>
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #f1f5f9; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 20px;">üìû</span>
                                <p style="font-size: 13px; color: #64748b;">Butuh bantuan layanan? <a href="https://wa.me/6285602533346" style="color: #2563eb; font-weight: 700; text-decoration: none;">Hubungi Admin</a></p>
                            </div>
                        </div>`;
                } else {
                    hasilDiv.innerHTML = `<div style="padding: 30px; background: white; border-radius: 24px; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.05); border: 1px solid #fef2f2; text-align: center;"><div style="display:inline-flex; align-items:center; justify-content:center; width:60px; height:60px; background:#fef2f2; border-radius:50%; margin-bottom:15px;"><span style="font-size: 24px;">‚ùå</span></div><h4 style="color:#0f172a; font-size:18px; font-weight:700; margin-bottom:10px;">Data Tidak Ditemukan</h4><p style="color:#64748b; font-size:14px;">${data.pesan}</p></div>`;
                }
            })
            .catch(error => {
                hasilDiv.innerHTML = `<div style="padding:20px; background:white; color:#c2410c; border-radius:16px; border:1px solid #ffedd5; text-align:center;">‚ö†Ô∏è Terjadi gangguan koneksi ke server.</div>`;
            });
        }
       // ==========================================
        // KODE PENGGERAK PETA MODERN KAWAN NET
        // ==========================================
        
        // 1. Inisialisasi Peta (Titik tengah Pekalongan)
        const map = L.map('map', {
            zoomControl: false, // Matikan tombol zoom standar
            attributionControl: false // Matikan tulisan Leaflet standar
        }).setView([-6.8898, 109.6745], 13); 

        // 2. Pasang Peta Dasar Modern (CartoDB Voyager - Terang & Bersih)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png', {
            maxZoom: 20
        }).addTo(map);

        // Pasang Label Jalan (Opsional, agar tetap terbaca)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png').addTo(map);

        // Tambahkan tombol zoom di pojok kanan bawah agar lebih rapi
        L.control.zoom({ position: 'bottomright' }).addTo(map);

        // 3. Memanggil Titik Jaringan dari Server
        fetch(urlAPI + "?aksi=peta")
            .then(res => res.json())
            .then(data => {
                data.forEach(p => {
                    if(p.lat && p.lng) {
                        const isAktif = (p.status === 'Aktif');
                        
                        // Set Warna Gradasi (Aktif = Blue/Cyan, Lainnya = Merah/Orange)
                        const warnaUtama = isAktif ? '#2563eb' : '#ef4444'; // Biru atau Merah
                        const warnaCyan  = isAktif ? '#06b6d4' : '#f97316'; // Cyan atau Orange
                        
                        // Gabungan Denyut dan Titik Utama dalam Satu Container
                        const modernMarkerHtml = `
                            <div style="position:relative; width:18px; height:18px; display:flex; align-items:center; justify-content:center;">
                                <div style="position:absolute; width:100%; height:100%; border-radius:50%; background:${warnaUtama}; animation:pulse-modern 2s infinite;"></div>
                                <div style="position:relative; width:10px; height:10px; border-radius:50%; background:linear-gradient(135deg, ${warnaUtama}, ${warnaCyan}); border:2px solid white; box-shadow:0 0 10px rgba(37,99,235,0.4);"></div>
                            </div>
                        `;

                        // Tampilkan Titik di Peta menggunakan DivIcon
                        L.marker([p.lat, p.lng], {
                            icon: L.divIcon({
                                className: 'modern-marker',
                                html: modernMarkerHtml,
                                iconSize: [18, 18],
                                iconAnchor: [9, 9]
                            })
                        })
                        .addTo(map)
                        // Popup Kaca yang sudah didesain di CSS atas
                        .bindPopup(`
                            <div style="min-width:200px; padding: 10px 0;">
                                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; padding-bottom:10px; border-bottom:1px solid rgba(0,0,0,0.05);">
                                    <span style="font-size:10px; color:#64748b; font-weight:700; text-transform:uppercase; letter-spacing:1px;">Layanan Aktif</span>
                                    <span style="background:${isAktif ? '#dcfce7' : '#fee2e2'}; color:${isAktif ? '#166534' : '#991b1b'}; padding:4px 10px; border-radius:50px; font-size:11px; font-weight:700; box-shadow:0 0 10px rgba(0,0,0,0.03);">${p.status}</span>
                                </div>
                                <p style="font-size:11px; color:#64748b; margin-bottom:3px;">Nama Pelanggan</p>
                                <h4 class="modern-title" style="margin-bottom:5px;">${p.id_rahasia}</h4>
                                <p style="font-size:11px; color:#64748b;">üìç Wilayah Pekalongan</p>
                            </div>
                        `);
                    }
                });
            })
            .catch(err => console.error("Gagal memuat peta: ", err));
    </script>
</body>
</html>
